//-------------------------------------------------------------------------------------------------
// File : App.h
// Desc : Application Module.
// Copyright(c) Project Asura. All right reserved.
//-------------------------------------------------------------------------------------------------

#pragma once

//-------------------------------------------------------------------------------------------------
// Includes
//-------------------------------------------------------------------------------------------------
#include <Windows.h>
#include <d3d12.h>
#include <asdxTypedef.h>
#include <asdxRef.h>


///////////////////////////////////////////////////////////////////////////////////////////////////
// App class
///////////////////////////////////////////////////////////////////////////////////////////////////
class App
{
    //=============================================================================================
    // list of friend classes and methods.
    //=============================================================================================
    /* NOTHING */

public:
    //=============================================================================================
    // public variables.
    //=============================================================================================


    //=============================================================================================
    // public methods.
    //=============================================================================================
    App();
    virtual ~App();
    void Run();


protected:
    //=============================================================================================
    // protected variables.
    //=============================================================================================
    HINSTANCE           m_hInst;
    HWND                m_hWnd;
    D3D_DRIVER_TYPE     m_DriverType;
    D3D_FEATURE_LEVEL   m_FeatureLevel;
    DXGI_FORMAT         m_SwapChainFormat;
    DXGI_FORMAT         m_DepthStencilFormat;



    //=============================================================================================
    // protected methods.
    //=============================================================================================
    virtual bool OnInit();
    virtual void OnTerm();
    virtual void OnFrameMove();
    virtual void OnFrameRender();
    virtual void OnResize();

private:
    //=============================================================================================
    // private variables.
    //=============================================================================================


    //=============================================================================================
    // private methods.
    //=============================================================================================
    bool InitApp();
    void TermApp();
    bool InitWnd();
    void TermWnd();
    bool InitD3D();
    void TermD3D();
    void MainLoop();

    static LRESULT CALLBACK MsgProc(HWND hWnd, UINT uMsg, WPARAM wp, LPARAM lp);
};
